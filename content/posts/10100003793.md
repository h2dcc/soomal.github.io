---
author: 夏昆冈
categories:
- 相机
- 镜头
- 影像
- 技术
cover:
  alt: ''
  caption: ''
  image: https://images.soomal.cc/images/doc/20130628/00032754.webp
  relative: false
date: '2013-02-24T19:06:31+08:00'
description: 源自：www.soomal.com | 版权：原创 |  平均/总评分：09.67/561
summary: 现在很多机型都在都在用“快速”“迅速”等词汇形容自己的对焦速度，就连对焦最慢的XXX也在自诩“高速”，但实际情况却远不是那么回事。同样是反差对焦，为什么速度差异那么大？这其中有不少关键技术，之前我们也写过这方面的科普文章，这篇争取更详尽的描述一下。决定反差对焦速度的有三个关键点：刷新率、算法以及镜头的设计。
tags:
- EVIL
- 反差式对焦
- 自动对焦
- 微单
- 对焦
- 科普
- Soomal精华
title: 快速反差对焦的秘密
---

同样是反差对焦，为什么速度差异那么大？这其中有不少关键技术，之前我们也写过这方面的科普文章，这篇争取更详尽的描述一下。决定反差对焦速度的有三个关键点：刷新率、算法以及镜头的设计。

反差对焦的基本原理
![反差式对焦示意图](https://images.soomal.cc/images/doc/20111231/00015887.webp)




反差对焦的基本原理很简单。

我们之前写过数字图像入门，强调了一个最基本的概念，就是图像其实就是一个数字矩阵，像素的亮度值、色彩值都是可以用整数来表达的。而相机通过对焦框获得场景中的一小块图像，其实也就是获得了一个小规模的数字矩阵，通过对比这矩阵中的最大值和最小值的值差，就能确定反差程度。仅有一帧图像是不够的，需要一组序列图像才行，通过对比一组图像的反差，确定反差最大的那帧，即为合焦帧，就是对上了焦的那帧。这是反差对焦的基本原理，是一个很简单的数字对比过程，并没有什么奥秘可言。

要让筛选变快，需要两个条件，一个是降低序列图像的规模，减少对比次数；一个是更加快速密集的数据源，让数据提供变得更快。

对焦过程
![对焦点位置与被摄物体影像清晰度的简单关系](https://images.soomal.cc/images/doc/20120613/00020334.webp)




为了说明对焦点位置和影像清晰度的关系，我们又补充了一张图。使用F1-F8来表示8个不同的焦点位置与被摄物体影像清晰度的关系。

我们可以将反差式对焦大致过程简单描述：

驱动镜头，沿着指向被摄物的轴线改变对焦点，并在每个对焦点上获取影像，类似于逐点扫描
先将每一个焦点上获得的影像数字化，即一个整数矩阵
求出图像的反差值，其实就是简单的数值比较运算，求最大值和最小值的值差。
将每一个焦点上得到的反差值进行比较，得到最大值
驱动镜头，将焦点放置于反差值最大的焦点上，即得到正确的焦点，即对焦完成

感光器的采样帧率
感光器的采样帧率，也被称为实时刷新率，这个参数一直不愿意被提及，除了松下，因为大部分感光器的这个参数有些羞于见人，这也是很多相机反差对焦性能不佳的关键原因。

目前最高性能的采感光器用帧率可达240FPS，这个240FPS不是指的它可以完成每秒240帧静态图像的拍摄，也不是指其可以实现240FPS的视频拍摄，所谓采样帧率，就是指的在取景模式下，感光器的每秒采样帧数，参数越高，感光器传递给图形处理器的数据也就越密集。相比老的感光器30FPS的水准，新感光器获取10帧的时间由1/3秒缩短到了只要1/24秒。

镜头的采样帧率
镜头也有采样帧率的概念，也是用FPS这个帧率单位表达。反差式对焦的过程中，会驱动镜头搜寻焦点，而每秒的驱动次数，也就是采样帧率，也可以理解为镜头的驱动频率，即镜头可以每秒钟被马达驱动N次，即焦点可以更改N次。

镜头要实现高采样帧率，也需要新的设计。在之前的单反自动镜头设计中，多采用直流马达、音圈马达、超声波马达，这些马达的换能方式不尽相同，但工作状态却很相似的。随着反差对焦技术的兴起，一种以前不太被重视的马达类型也得到更大范围的应用，这种马达就是步进马达。

步进马达是利用脉冲信号来完成指令控制，每一次脉冲都能精确的控制转动角度，而且不存在积累性误差，因此驱动镜片的距离也是可以得到精确控制的，这是步进马达与其他马达最大的不同。而这种特性，非常适合与反差对焦方式配合，反差对焦需要沿着轴线搜寻焦点，而每一个搜寻点需要有精确的位置，以便返回，因此步进马达是最佳的搭档。

在当年，步进马达不受重视的重要原因就是步进马达的驱动频率较低，导致了其整体的驱动效率不够，但随着机电水平的进步，这些问题已经获得解决。

![快速对焦优化的设计，驱动尽可能少的镜片来实现对焦](https://images.soomal.cc/images/doc/20130224/00027889.webp)




![Olympus 奥林巴斯 M.Zuiko Digital ED 75mm F1.8 定焦镜头-安装于奥林巴斯E-M5机身](https://images.soomal.cc/images/doc/20120906/00022565.webp)




只是提高步进马达的驱动频率还不够，因为小型化设计中，马达自身的体积受限，马达驱动力也会因此受限，要确保每次驱动都及时到位，需要对镜头进行优化，要让马达尽可能的少驱动镜片，尽可能的只驱动小型轻量镜片，这样每次驱动才能实现快速反应。这种设计被运用到某些新镜头设计当中，顶级的M.zuiko 75毫米定焦镜头，仅仅需要驱动一枚很小的镜片即可完成对焦，这样的设计，效率能得到最大化的保证。

当新型的马达和新型的镜头设计能灵活的配合运用时，镜头的采样帧率才能达到理想的水平，只有镜头帧率大于等于感光器帧率时，感光器的采样帧率才会有实际意义，感光器的每一帧才能算得上是新的采样。 

算法的影响
有了密集的高频率数据源，在算法不变的情况下，对焦速度显然会明显的提高。反差式对焦的过程会对焦点进行一次甚至多次前后扫描，如果扫描点是沿着轴线均匀分布，那么对焦效率是最低的。

还是用前面的图作为演示，该例中，使用了8帧得到了焦点。如果在F1时，发现反差值较低，直接跳过F2到F3，会侦测到反差值得到了迅速提高，此时再缩小“跳跃距离”进入到F4、F5，这样一来就节省了一帧，速度自然就加快了。当进入到F6、F7时，会发现反差值在下降，此时可以判断为已经越过正确的焦点，从而停止进入F8的动作，这样整个过程节省了2帧，速度可以提升25%。这就是算法对速度的影响。

实际情况远比这复杂，最典型的莫过于弱光环境下的对焦，弱光环境中获得图像反差度较低，而且感光器也容易出现更多杂讯，这些都会干扰判断，如果从一组图像中筛选出焦点，会变得更加困难，目前大部分反差对焦的机型弱光下对焦性能明显下降，甚至不可用，只有少数能做到影响不大。

快速对焦是系统的综合体现
现在很多机型都在都在用“快速”“迅速”等词汇形容自己的对焦速度，就连对焦最慢的XXX也在自诩“高速”，但实际情况却远不是那么回事。快速对焦靠技术不靠嘴炮。

要实现快速对焦，高采样帧率的感光器，高采样帧率的镜头，优质的算法缺一不可，它们是对焦过程的参与者，新机身配上老镜头，不会快，老机身配新镜头改善也会很有限，指望着靠算法就产生翻天覆地的变化本身也是错误的，能有改善就算不错。快速对焦是系统的综合体现，性能由最短板决定。

如果我们能够基本了解快速反差对焦的关键点，消费中也就没有那么容易迷茫了。