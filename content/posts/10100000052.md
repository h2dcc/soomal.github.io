---
author: 炒面超人
categories:
- 音频编解码
- 应用
- 音频
- 技术
cover:
  alt: ''
  caption: ''
  image: https://images.soomal.cc/images/doc/20090415/00000212.webp
  relative: false
date: '2003-05-08T00:49:03+08:00'
description: 源自：www.soomal.com | 版权：投稿 |  平均/总评分：10.00/10
summary: 随着宽带和高性能个人电脑的普及，个人网络广播电台的建立已经不是一个梦想。现在比较流行的网络电台一般是基于MP3/Real/Windows Media编码，在这几种编码方式中，windows
  media无疑占了上风，系统资源占用相对较小，低比特率下音质较高，同时易学易用，客户端的播放软件更是每一台安装有windows的PC都有的windows media
  player。在实时采集音源，采用135，70，52Kbps多种编码率同时编码的情况下，AthlonXP1600+的系统CPU占用在12％～20％之间
tags:
- 电台
title: 使用Windows Media Encoder 9.0搭建数字电台
---

随着宽带和高性能个人电脑的普及，个人网络广播电台的建立已经不是一个梦想。现在比较流行的网络电台一般是基于MP3/Real/Windows Media编码，在这几种编码方式中，windows media无疑占了上风，系统资源占用相对较小，低比特率下音质较高，同时易学易用，客户端的播放软件更是每一台安装有windows的PC都有的windows media player。在实时采集音源，采用135，70，52Kbps多种编码率同时编码的情况下，AthlonXP1600+的系统CPU占用在12％～20％之间。

一、开始建立电台

首先，建立电台需要一些相关的硬件：

1、拥有强劲的浮点运算能力的CPU。由于大多数用于建立个人电台的PC都是网友自用的，所以为了保证您在做广播时CPU有足够的能力负担您其余的操作，请选择拥有强大浮点运算能力的CPU，一般来说，你的CPU主频需要在500Mhz以上，一台AthlonXP或者P4的高性能电脑则可以使得您在广播的同时有充分的CPU资源可用。

2、一块好的声卡。虽然目前几乎所有的声卡都可以用于数字广播，但我们仍旧强调低CPU占用，作为服务器端，释放更多的CPU资源可以提供更好的服务。虽然创新的声卡的播放音质有不少人怀疑，但是Live！和Audigy的录音品质是非常好的。并且，Live对CPU资源的占用相当的少，不过Audigy由于其驱动程序占用大量内存，使得它的系统资源占用反而没有Live优秀。当然了，即使板载AC'97也是可以用来搭建电台的 ，本文中笔者就以板载AC'97来说明如何搭建电台。

3、拥有良好的上行带宽。虽然任何带宽都可以建立数字电台，但要建立有实用价值的电台需要足够的上行带宽才行。64kbps的WMA可以提供接近128kbps的mp3的音质，512k的带宽可以应付8位听众的接听64kbps WMA的听音需求。如果您拥有10M带宽，提供40kbps立体声广播，足够建设出一个小有规模的数字电台出来。 这里还涉及到一个英特网IP的问题，如果您用来建立电台的PC没有独立的英特网IP，是无法对整个因特网广播的。关于内网电台如何向英特网广播，请参考附录。

在软件方面我们需要：

1、Windows Media Encoder 9.0，微软提供的Windows Media编码器，这个软件不但提供了Windows Media编码能力，还提供了搭建数字电台的服务器功能，操作很简单，是本篇文章的主角。

2、众多的数字音频格式保存的音乐文件。可以是mp3、mpc、wma、ape、wav或者CD，甚至VCD、DVD，当然，如果您愿意，也可以通过麦克风或者线性输入来广播。

二、建立实时编码的电台

安装完毕Windows Media Encoder9.0并启动它，软件自动弹出设置向导。我们选择“广播实况事件”，点击确定：

![Windows Media Encoder9.0](https://images.soomal.cc/images/doc/20090415/00000212.webp)



接下来选择录音的音频设备，一般来说，默认就可以了，如果你有多块声卡，请选择录音质量比较好的一块（哪一块比较好自己比较咯^_^）

![Windows Media Encoder9.0 选择录音的音频设备](https://images.soomal.cc/images/doc/20090415/00000213.webp)



下一步以后选择广播方法，由于我们使用自己的PC作为广播服务器，所以选择“自编码器拉传递”（真是奇怪的名字…………）：

![Windows Media Encoder9.0 自编码器拉传递](https://images.soomal.cc/images/doc/20090415/00000214.webp)



这里我们选择windows media服务端口，也就是您的PC对外广播的端口，软件默认的是8080端口，我们不推荐这个设置，请点击“查找可用端口”选择一个当前没有占用的端口。您可以不停的按“查找可用端口”以选择一个比较容易记的数字 ，或者填一个您喜欢的端口号（这样作由于端口可能已经被占用，开始广播的时候软件会提示您端口已经被占用，此时只能另选端口）：

![Windows Media Encoder9.0 选择广播的端口](https://images.soomal.cc/images/doc/20090415/00000215.webp)



编码选项笔者选择了“多比特率编码（CBR）”135、70、54Kbps三种，这样可以适应更多网友的带宽情况。当然了，编码越是复杂，CPU占用越高，各位电台站长请根据自己机器的性能和带宽自行调整 ，如果带宽比较窄，请设置为低比特率的单一编码，否则客户端会出现经常load的情况。

![Windows Media Encoder9.0 多比特率编码](https://images.soomal.cc/images/doc/20090415/00000216.webp)



一般来说，存档文件的功能是不常用的，因为我们广播用的音乐都已经以文件形式在我们自己手里了。但是如果您亲自做电台主持人，或者您亲自表演Live Show，那么把录音保存下来留作纪念是一个很有吸引力的想法。我们选中“将广播的副本存档到文件”，然后选择一个目录（请保证目录所在的硬盘分区有足够的空间存储录音文件）就可以了 。

![Windows Media Encoder9.0 存档文件](https://images.soomal.cc/images/doc/20090415/00000217.webp)



下面这些信息可以由您完全自定义，并没有任何特殊要求，因为这是您自己的电台。当然了，我想各位是不会放过这个展示个性的机会的了：）

![Windows Media Encoder9.0 显示信息](https://images.soomal.cc/images/doc/20090415/00000218.webp)



好，基本的设置就到这里为止，请不要勾选‘单击“完成”后开始广播’，因为接下来我们还有一些设置要做。请单击“完成”。

![Windows Media Encoder9.0 设置检查](https://images.soomal.cc/images/doc/20090415/00000219.webp)



OK，这就是windows media encoder的正式界面了，各个选项卡可以查看具体的服务器状况，现在编码器还没有启动：

![Windows Media Encoder9.0 界面](https://images.soomal.cc/images/doc/20090415/00000220.webp)



单击“查看－－音频面板”打开音频控制面板：

![Windows Media Encoder9.0 打开音频控制面板](https://images.soomal.cc/images/doc/20090415/00000221.webp)



单击音频面板上的“混音器”：

![Windows Media Encoder9.0 混音器](https://images.soomal.cc/images/doc/20090415/00000222.webp)



在弹出的“录音控制”上单击“选项－－属性”

![录音控制](https://images.soomal.cc/images/doc/20090415/00000223.webp)



现在我们可以看到，在“显示下列音量控制”有一系列选项，这里笔者选上了“Stereo Mixer”，由于声卡的不同，在您的系统上这个选项名称会有所不同，请选择一个可以录制系统全部声音的选项。也就是说，这个选项不是一个很明确的选项（像这里的Stereo Mixer并没有说明是什么设备，不像Mic之类的那么明显）。如果您找不到这个选项，请更新一下您的声卡驱动程序，笔者的板载AC'97都有这个选项， 大多数声卡都是支持采集系统全部声音的。

![录音控制 －属性](https://images.soomal.cc/images/doc/20090415/00000224.webp)



好，现在的“录音控制”变成这个样子了，请注意，在这个面板上，右边的“Stereo Mixer”、“Mic”、“辅助”这些选项是“单选”的，也就是说，只能选一个，我们就选前面找的那个“Stereo Mixer”，也就是可以录制系统全部声音的选项。

![录音控制](https://images.soomal.cc/images/doc/20090415/00000225.webp)



通过以上的设置，您现在单击“开始编码”就可以开始广播了，此时您使用任何播放器播放的音频都会通过您的个人电台对外广播出去，这里笔者使用Foobar2000作为播放器，Foobar2000的资源占用很小，同时支持的音频格式很多，ape、mpc、mp3、甚至wma都可以通过最新的插件予以支持，音质也相当不错，推荐使用。当然，用winamp等其他的播放器也是完全可以的，任何您通过您自己的PC听到的声音都会播放出去，所以播放器的选择您有充分的自由 。

![Windows Media Encoder9.0 开始编码](https://images.soomal.cc/images/doc/20090415/00000226.webp)



您可以单击“文件－－保存”把当前的设定保存到文件，也就是说，您其实可以做几个完全不同的设置，保存为文件，下一次想调用什么样的设置，只需要打开相应的设置文件就可以了。

现在，比如您的公网IP是***.***.***.***，您自定义的广播端口是####，那么只要告诉您的朋友用IE打开mms://***.***.***.***:####，就可以收听到您的广播了！

三、建立“源”方式的电台

实时编码的电台虽然灵活性比较好，但是也有很大缺点，您操作的声音，包括QQ，MSN等等的声音都会广播出去，影响广播质量，为此您不得不关闭这些声音。同时如果您的朋友要求点歌，但是您又想听其他的歌曲的时候，就会发生冲突。此时，如果我们用“源”的方式就很容易做到互相不冲突。 更加有意思的是，使用“源”的方式，我们可以实现传统广播电台的主持人方式的效果^_^

这一次，我们选择“自定义会话”，点击确定。

![Windows Media Encoder9.0 自定义会话](https://images.soomal.cc/images/doc/20090415/00000227.webp)



现在的 这个面板看起来有点复杂，一共有九个标签页，但事实上，“输出”、“压缩”、“属性”、“高级”等我们在实时编码方式中，都已经遇到过了，您现在完全有能力定制他们。而“视频大小”是我们不需要的。这里关键是“源”标签页，这是我们下面的重点 ，至于“插件”标签页可以提供各种音频处理插件，不过我们不推荐使用，当然您可以自己研究一下。我们可以看到，在“源”标签页上，“源来自”选项有“设备”、“文件”、“设备和文件”三个选项，其中 看起来很有意思的是“设备和文件”，但是这个选项不是非常有用，因为前面的两个选项完全可以替代它。

![Windows Media Encoder9.0 设备和文件](https://images.soomal.cc/images/doc/20090415/00000228.webp)



选择“设备和文件”，然后点击“音频”的下拉箭头，我们看到有很多选项，但是“多声道wav源”一般是不用的，而“[空白]”是没有用的东西 ，您如果选择[空白]，那么点击确定的时候软件会提示您必须选择一个设备或文件，而且使用这个选项我们只能一个一个地添加文件：

![Windows Media Encoder9.0 添加文件](https://images.soomal.cc/images/doc/20090415/00000229.webp)



因此，如果您仅仅是播放音乐文件，选择“文件”单击“浏览”可以更方便地一次性添加多个文件：

![Windows Media Encoder9.0 一次性添加多个文件](https://images.soomal.cc/images/doc/20090415/00000230.webp)



添加完成以后我们看到左边出来了很多的“源”，您可以选中某个“源”，然后使用“添加”按钮旁的上下箭头调整这个源到您需要的位置，也可以对这个源改名，方便记忆。 然后我们需要对每一个源设置这个源结束以后的动作，一般设置为“滚动到下一个源”，当然，你也可以把最后一个源设置为“滚动到第一个源”，这样这些文件就可以整体循环播放了：

![Windows Media Encoder9.0 滚动到第一个源](https://images.soomal.cc/images/doc/20090415/00000231.webp)



单击“开始编码”，就可以对外广播这些文件了，此时编码器直接把文件编码输出，您在自己的PC上是听不到文件播放的声音的。此时您如果在使用其他的播放器播放的音乐也不会进入到广播当中 ，这样您自己听音乐和做广播就互不干扰了。

![Windows Media Encoder9.0 开始编码](https://images.soomal.cc/images/doc/20090415/00000232.webp)



如果就是这个样子，非得事先找好文件，然后广播，那么“源”的方式实在是太死板了。呵呵，其实只要您单击“查看－－属性面板”就可以继续对当前不在播放的源进行操作，包括添加和删除 源。

![Windows Media Encoder9.0 查看 属性面板](https://images.soomal.cc/images/doc/20090415/00000233.webp)



此时，我们不但可以添加其他的文件进来，而且可以添加设备作为源，也就是说，我们可以在放完一首歌以后，使用设备作为下一个源 ，这样我们就可以在两首歌之间加入旁白等等。

![Windows Media Encoder9.0 添加设备作为源](https://images.soomal.cc/images/doc/20090415/00000234.webp)



单击“添加”，选“设备”，单击配置，我们可以在属性页的“插头线”下拉列表中选择我们需要的输入设备，如果希望实现主持人的效果，可以选Mic（麦克风） ，这样您就可以通过麦克风进行电台的节目主持了：

![Windows Media Encoder9.0 完成设置](https://images.soomal.cc/images/doc/20090415/00000235.webp)



单击确定，然后单击“应用”就可以使设置生效，想要使用这个源时，您可以使用“添加”按钮旁的上下箭头来移动选中的源（注意是移动右边会话属性中选中的源，这里选中的是源8），将其放置到一个即将播放完的一个源后面，不要忘了点击“应用”来保存设置。当然了，您可以直接在左边的“源”面板上单击您现在想用的源或者右键单击 －激活。

![Windows Media Encoder9.0 完成设置](https://images.soomal.cc/images/doc/20090415/00000235.webp)



当然了，如果您表演个人Live Show的话，您可以使用插件对您的声音做一些修饰的，比如加入回响，这使得您可以很轻松地实现卡拉OK上的效果：

![Windows Media Encoder9.0 完成设置](https://images.soomal.cc/images/doc/20090415/00000235.webp)



至于如何发挥，这就是您－－电台台长展现个人风采的机会了，笔者在此不再多说。



四、附录

1.笔者在第一部分提到了关于内网用户无法直接开电台的问题，那么如何建立电台呢？除了上面所讲的部分以外，您需要您的网关服务器（网关服务器具有独立的英特网IP）支持端口映射，将您的广播端口映射到网关的端口，一般来说，现在的小型路由器，或者安装了双网卡用来作为网关的计算机都可以做到端口映射。路由器的端口映射方法请参考该路由器的说明手册，网关计算机的端口映射则和该计算机的操作系统有关，windows2000，XP，2003都在网络连接共享里可以设置端口映射，一些软件比如CCproxy也带有端口映射功能。设置完成以后，您的广播地址就是mms://网关的IP:网关上映射好的端口。

2.使用“源”的方式是比较合理的，但是操作比较复杂，实时广播则操作简单实用，但实时广播对系统要求比较高，使用哪一种方式您可以自己选择。

3.如果想建设一个长期的电台，我们推荐您申请一个2级域名来简化工作。即使您自己拥有固定的IP，我们仍然建议您这样做，因为在网上公开您的IP并不是是明智的做法，使用域名可以免除您不少麻烦（虽然这不是一个有效的手段）。